<!DOCTYPE html>
<html>
<head>
    <title>Library Dashboard</title>
    <style>
        body { font-family: sans-serif; margin: 20px; }
        table { width: 100%; border-collapse: collapse; margin-top: 20px; }
        th, td { border: 1px solid #ddd; padding: 8px; text-align: left; }
        th { background-color: #4CAF50; color: white; }
        .form-section { background: #eee; padding: 15px; margin-bottom: 20px; }
    </style>
</head>
<body>
    <h1>Library Management System</h1>
    <a href="/logout">Logout</a>

    <div class="form-section">
        <h3>Add New Book</h3>
        <form action="/add_book" method="POST">
            <input name="b_id" placeholder="Book ID" required>
            <input name="title" placeholder="Title">
            <input name="author" placeholder="Author">
            <input name="edition" placeholder="Edition">
            <input name="price" placeholder="Price">
            <button type="submit">Add Book</button>
        </form>
    </div>

    <table>
        <tr>
            <th>ID</th><th>Title</th><th>Author</th><th>Status</th><th>Issued To</th><th>Actions</th>
        </tr>
        {% for book in books %}
        <tr>
            <td>{{ book['book_id'] }}</td>
            <td>{{ book['title'] }}</td>
            <td>{{ book['author'] }}</td>
            <td>{{ book['status'] }}</td>
            <td>{{ book['issued_to'] }}</td>
            <td>
                {% if book['status'] == 'Available' %}
                <form action="/issue/{{ book['book_id'] }}" method="POST" style="display:inline;">
                    <input name="student_id" placeholder="Student ID" required>
                    <button type="submit">Issue</button>
                </form>
                {% else %}
                <a href="/return/{{ book['book_id'] }}"><button>Return</button></a>
                {% endif %}
                <a href="/delete/{{ book['book_id'] }}" style="color:red;">Delete</a>
            </td>
        </tr>
        {% endfor %}
    </table>
</body>
</html>

